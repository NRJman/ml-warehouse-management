<div class="animated fadeIn sign-up-subordinates-form-container">
    <div class="form-header">
        <h5 class="form-title">Sign Up Your Subordinates</h5>
        <button class="btn btn-primary" (click)="addSubordinate()">Add one</button>
    </div>

    <form
        (ngSubmit)="onSignUpSubordinatesFormSubmit()"
        class="sign-up-subordinates-form"
        [formGroup]="signUpSubordinatesForm">
        
        <ng-container formArrayName="subordinates">
            <div class="card" *ngFor="let subordinate of subordinates.controls; index as i">
                <ng-container [formGroupName]="i">
                    <div class="card-header">
                        <div class="subordinate-name-wrapper">
                            <strong>{{ (subordinate.get('name').valueChanges | async) || 'New' }}</strong>
                            <small>Subordinate</small>
                        </div>

                        <button
                            type="button"
                            class="card-header-action btn btn-link btn-close"
                            (click)="deleteSubordinate(i)"
                            *ngIf="subordinates.length !== 1">

                            <i class="icon-close"></i>
                        </button>
                    </div>
            
                    <div class="card-body p-4">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="icon-user"></i></span>
                            </div>
            
                            <input
                                formControlName="name"
                                type="text"
                                class="form-control"
                                placeholder="Name"
                                autocomplete="name">
                        </div>
            
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="icon-phone"></i></span>
                            </div>
            
                            <input
                                formControlName="phone"
                                type="number"
                                class="form-control"
                                placeholder="Phone Number"
                                autocomplete="phone">
                        </div>
            
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">@</span>
                            </div>
            
                            <input
                                formControlName="email"
                                type="text"
                                class="form-control"
                                placeholder="Email"
                                autocomplete="email">
                        </div>
            
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="icon-lock"></i></span>
                            </div>
            
                            <input
                                formControlName="password"
                                type="password"
                                class="form-control"
                                placeholder="Password"
                                autocomplete="new-password">
                        </div>
            
                        <div class="input-group mb-4">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="icon-lock"></i></span>
                            </div>
            
                            <input
                                formControlName="repeatPassword"
                                type="password"
                                class="form-control"
                                placeholder="Repeat password"
                                autocomplete="new-password">
                        </div>  
                    </div>
                </ng-container>
            </div>
        </ng-container>

        <div class="form-action">
            <button
                type="submit"
                [disabled]="signUpSubordinatesForm.invalid || !adminState.warehouseId || !adminState.adminId"
                class="btn btn-primary btn-submit">Sign Up</button>
        </div>
    </form>
</div>